<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZACK - Applicazione di Consultazione</title>
  
  <!-- Stili CSS in ordine di priorità -->
  <link rel="stylesheet" href="home.css">
  <link rel="stylesheet" href="sidebar/sidebar.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Script JavaScript in ordine di dipendenza -->
  <script src="vue.global.js"></script>
</head>
<body>
  <div id="app">
    <!-- Pulsante toggle separato dalla sidebar, posizione fissa -->
    <button 
      id="sidebar-toggle" 
      @click="toggleSidebarWidth"
      aria-label="Restringi o espandi la barra laterale"
      :style="{ left: isSidebarNarrow ? '4px' : '10px' }"
    >
      <i class="fas" :class="isSidebarNarrow ? 'fa-expand' : 'fa-compress'"></i>
    </button>

    <!-- Sidebar laterale -->
    <nav class="sidebar" :class="{ 'narrow': isSidebarNarrow }">
      <div v-if="!pagine.length" class="sidebar-loader">Caricamento...</div>
      <button
        v-for="(pagina, idx) in pagine"
        :key="idx"
        :class="[
          { active: paginaAttiva === idx, 'search-match': corrispondeRicerca(idx) },
          { 'extended-content': pagina.nome.length > 30 }
        ]"
        :data-first-letter="pagina.nome.charAt(0)"
        :data-text-length="pagina.nome.length > 20 ? 'long' : null"
        @click="vaiAllaPagina(idx)"
      >
        {{ pagina.nome }}
      </button>
    </nav>

    <!-- ✅ SPOSTA QUI - Elementi effetto libro DOPO la sidebar -->
    <div id="book-effect"></div>
    <div id="book-effect-right"></div>

    <!-- Barra di ricerca sopra il contenuto -->
    <iframe
      src="ricerca/ricerca.html"
      class="iframe-ricerca"
      title="Barra di ricerca"
      frameborder="0"
    ></iframe>

    <!-- Contenuto principale -->
    <main class="content">
      <iframe
        class="page-content"
        :src="paginaAttiva !== null ? paginaCorrenteFile : ''"
        frameborder="0"
      ></iframe>
      <div v-if="paginaAttiva === null" class="page-title-preview">Seleziona una pagina</div>
    </main>
  </div>
  
  <!-- Script applicazione -->
  <script src="sidebar/sidebar.js"></script>
</body>
</html>